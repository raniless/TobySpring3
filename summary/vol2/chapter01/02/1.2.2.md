## 1.2.2 빈 등록 방법
- XML: \<bean> 태그
  + 스프링 빈 메타정보의 거의 모든 항목을 지정할 수 있으므로 세밀한 제어가 가능
  + \<bean> 태그는 \<beans>라는 루트 엘리먼트를 갖는 XML 문서에 포함
  + 기본적으로 id와 class라는 두 개의 애트리뷰트가 필요, id는 생략 가능
  + \<bean>은 다른 빈의 \<property> 태그안에 정의할 수도 있다. 이때는 \<bean>의 아이디나 이름을 지정해주지 않는다.  
    DI이긴 하지만 정 빈과 강한 결합을 가지고 등록되는 경우에 내부 빈을 사용
  ```xml
  <bean id="hello" class="springbook.learningtest.spring.ioc.bean.Hello">
    <property name="printer">
      <bean class="springbook.learningtest.spring.ioc.bean.StringPrinter" />
    </property>
  </bean>
  ```
  
- XML: 네임스페이스와 전용 태그
  + 스프링은 기술적인 설정과 기반 서비스를 빈으로 등록할 때를 위해 의미가 잘 드러나는 네임스페이스와 태그를 가진 설정 방법을 제공   
    (aop, jdbc, context 등 10여가지 네임스페이스 제공)
    ```xml
    <aop:pointcut id="mypointcut" expression="execution(* *..*ServiceImpl.upgrade&(..))" />
    ```
  + 개발자 스스로 커스텀 태그를 만들어서 적용할 수도 있다.
    ```xml
    <app:module id-prefix="user" class-prefix="User" package="com.mycompany.user" />
    ```
  
- 자동인식을 이용한 빈 등록: 스테레오타입 애노테이션과 빈 스캐너
  + 빈으로 사용될 클래스에 특정 애노테이션을 부여해주면 빈 스캐닝을 통해 자동으로 찾아서 빈으로 등록
  + 스테레오타입 애노테이션 : @Component 애노테이션, @Component를 메타 애노테이션으로 가진 애노테이션
  + 빈 스캐너는 클래스의 이름을 빈의 아이디로 사용(클래스 이름의 첫 글자만 소문자로 바꿔서 사용)
    ```java
    @Component
    public class AnnotatedHello {
      ...
    }
    ```
  + 빈의 이름을 클래스 이름과 다르게 지정해야 할 경우 @Component의 디폴트 값을 이용해 빈 이름을 지정
    ```java
    @Component("myAnnotatedHello")
    public class AnnotatedHello {
      ...
    }
    ```
  + 복잡한 XML 문서 관리에 따른 수고를 덜어주고 개발 속도를 향상시킬 수 있음
  + But 어떤 빈들이 등록되는지를 한 눈에 파악할 수 없음
  + 자동인식을 통한 빈 등록을 사용하려면 다음 두 가지 방법 중 하나를 쓰면 된다.
    1. XML을 이용한 빈 스캐너 등록
       * XML 설정파일 안에 \<context:component-scan>을 넣어서 간단히 빈 스캐너를 등록
       ```xml
       <context:component-scan base-package="springbook.learningtest.spring.ioc.bean" />
       ```
    2. 빈 스캐너를 내장한 애플리케이션 컨텍스트 사용
       * 학습테스트는 AnnotationConfigApplicationContext, 웹에서는 AnnotationConfigWebApplicationContext 사용
       * 컨텍스트 파라미터를 설정하여 빈 스캐너를 등록
       ```xml
       <context-param>
         <param-name>contextClass</param-name>
         <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
       </context-param>

       <context-param>
         <param-name>contextConfigLocation</param-name>
         <!-- 하나 이상의 스캔 대상 패키지를 지정할 수도 있다. 이때는 각 패키지 사이에 공백을 넣어주면 된다. -->
         <param-value>springbook.learningtest.spring.ioc.bean</param-value>
       </context-param>
       ```
       * 스테레오타입 애노테이션의 종류  
         \- @Repository :데이터 액세스 계층의 DAO 또는 리포지토리 클래스에 사용  
         \- @Service : 서비스 계층의 클래스에 사용  
         \- @Controller : 프레젠테이션 계층의 MVC 컨트롤러에 사용
       * 스트레오타입 애노테이션을 직접 정의해서 사용 가능

- 자바 코드에 의한 빈 등록: @Configuration 클래스의 @Bean 메소드
- 자바 코드에 의한 빈 등록: 일반 빈 클래스의 @Bean 메소드
- 빈 등록 메타정보 구성전략